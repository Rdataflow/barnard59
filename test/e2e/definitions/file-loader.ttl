@base <http://example.org/pipeline/> .
@prefix code: <https://code.described.at/> .
@prefix p: <https://pipeline.described.at/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

<> a p:Pipeline, p:Readable ;
  p:steps
    [
      p:stepList
        (
          _:openSelf _:parse _:serialize
        )
    ] .

_:openSelf
  a p:Step ;
  code:implementedBy
    """
      (contents) => require('string-to-stream')(contents)
    """^^code:EcmaScript ;
  code:arguments
    (
      "definitions/file-loader.ttl"^^p:FileContents
    )
.

_:parse
  a p:Step ;
  code:implementedBy
    [
      a code:EcmaScriptModule ;
      code:link <node:barnard59-formats/n3.js#parse> ;
    ] ;
.

_:serialize
  a p:Step ;
  code:implementedBy
    [
      a code:EcmaScriptModule ;
      code:link <node:barnard59-formats/ntriples.js#serialize> ;
    ] ;
.
